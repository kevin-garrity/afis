<div class="wrapper wrapper-content">
  <div class="row">
    <div class="col-lg-8">

      <%= render 'dashboards/map' %>


    </div>

    <div class="col-lg-4">

      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h1>Checklists</h1>
        </div>

        <div class="ibox-content" style="clear:left; float:left; width: 50%; height: 390px;">
          <div class="text-center" style="padding-top: 55px; padding-bottom: 55px;">
            <h2>Compliance</h2>
            <div class="m-r-md inline" style="padding-top: 30px;">
              <input type="text" value="82" class="dial m-r-sm" data-fgColor="#55BF3B" data-width="140" data-height="150"/>
            </div>
          </div>
        </div>

        <div class="ibox-content" style="clear:right; float:left; width: 50%; height: 390px;">
          <div class="text-center" style="padding-top: 55px; padding-bottom: 55px;">
            <h2>Completion</h2>
            <div class="m-r-md inline" style="padding-top: 30px;">
              <input type="text" value="65" class="dial m-r" data-fgColor="#55BF3B" data-width="140" data-height="150"/>
            </div>
          </div>
        </div>

      </div>

      <!--
        <div class="ibox">
          <div class="ibox-title">
            <h1>Checklists</h1>
          </div>
          <div class="ibox-content" style="margin-top: 15px; clear:left; float:left; width: 50%;">
            <div id="container-checklist" style="height: 250px;"></div>
          </div>
          <div class="ibox-content" style="margin-top: 15px; clear:right; float:left; width: 50%;">
            <div id="container-completion" style="height: 250px;"></div>
          </div>
          <div class="ibox-content" style="border-width: 0px; height: 120px;">

          </div>
        </div>
    -->
    </div>

  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h1>Checklist Trend Analysis </h1>
        </div>
        <div class="ibox-content">
          <div id="container-linechart"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h1>Top 10 At Risk Checklists</h1>
        </div>
        <div class="ibox-content">

          <table class="table table-striped table-bordered table-hover" data-page-size="8" data-filter=#filter style="height: 600px;">
            <thead>
            <tr>
              <th>Checklist Title</th>
              <th>Unit</th>
              <th>Risk</th>

            </tr>
            </thead>
            <tbody>
            <tr>
              <td>Checklist 84</td>
              <td>Unit 1</td>
              <td><span class="label label-danger">High Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 14</td>
              <td>Unit 23</td>
              <td><span class="label label-warning">Elevated Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 22</td>
              <td>Unit 22</td>
              <td><span class="label label-warning">Elevated Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 1</td>
              <td>Unit 3</td>
              <td><span class="label label-warning">Elevated Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 567</td>
              <td>Unit 5</td>
              <td><span class="label label-warning">Moderated Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 342</td>
              <td>Unit 24</td>
              <td><span class="label label-primary">Low Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 142</td>
              <td>Unit 46</td>
              <td><span class="label label-primary">Low Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 21</td>
              <td>Unit 24</td>
              <td><span class="label label-primary">Low Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 142</td>
              <td>Unit 46</td>
              <td><span class="label label-default">No Risk</span></td>
            </tr>
            <tr>
              <td>Checklist 21</td>
              <td>Unit 24</td>
              <td><span class="label label-default">No Risk</span></td>
            </tr>
            </tbody>
          </table>

        </div>

      </div>
    </div>
  </div>
</div>



<% content_for :javascript do %>

    <script type="text/javascript">
      $(function () {
        var seriesOptions = [],

            complianceData = [{
              x: 1448928000000,
              y: 76.88
            }, {
              x: 1449014400000,
              y: 75.28
            }, {
              x: 1449100800000,
              y: 76.99
            }, {
              x: 1449187200000,
              y: 78.53
            }, {
              x: 1449446400000,
              y: 81.20
            }, {
              x: 1449532800000,
              y: 85.62
            }, {
              x: 1449619200000,
              y: 88.35
            }, {
              x: 1449705600000,
              y: 79.33
            }, {
              x: 1449792000000,
              y: 86.35
            }, {
              x: 1450051200000,
              y: 84.25
            }, {
              x: 1450137600000,
              y: 78.35
            }, {
              x: 1450224000000,
              y: 80.69
            }, {
              x: 1450396800000,
              y: 88.65
            }, {
              x: 1450656000000,
              y: 86.29
            }, {
              x: 1450742400000,
              y: 90.00
            }, {
              x: 1450828800000,
              y: 95.68
            }, {
              x: 1450915200000,
              y: 89.26
            }, {
              x: 1451260800000,
              y: 75.98
            }, {
              x: 1451347200000,
              y: 76.29
            }, {
              x: 1451433600000,
              y: 78.65
            }, {
              x: 1451520000000,
              y: 85.63
            }],

            completionData = [{
              x: 1448928000000,
              y: 50.22
            }, {
              x: 1449014400000,
              y: 52.61
            }, {
              x: 1449100800000,
              y: 53.70
            }, {
              x: 1449187200000,
              y: 55.91
            }, {
              x: 1449446400000,
              y: 58.50
            }, {
              x: 1449532800000,
              y: 61.26
            }, {
              x: 1449619200000,
              y: 63.55
            }, {
              x: 1449705600000,
              y: 65.27
            }, {
              x: 1449792000000,
              y: 66.06
            }, {
              x: 1450051200000,
              y: 68.14
            }, {
              x: 1450137600000,
              y: 69.20
            }, {
              x: 1450224000000,
              y: 71.13
            }, {
              x: 1450396800000,
              y: 71.58
            }, {
              x: 1450656000000,
              y: 72.33
            }, {
              x: 1450742400000,
              y: 73.50
            }, {
              x: 1450828800000,
              y: 74.25
            }, {
              x: 1450915200000,
              y: 55.67
            }, {
              x: 1451260800000,
              y: 58.95
            }, {
              x: 1451347200000,
              y: 61.28
            }, {
              x: 1451433600000,
              y: 65.82
            }, {
              x: 1451520000000,
              y: 70.59
            }];

        /**
         * Create the chart when all data is loaded
         * @returns {undefined}
         */
        function createChart() {

          $('#container-linechart').highcharts('StockChart', {

            rangeSelector: {
              selected: 4
            },

            yAxis: {
              labels: {
                formatter: function () {
                  return (this.value > 0 ? ' + ' : '') + this.value + '%';
                }
              },
              plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
              }]
            },

            plotOptions: {
              series: {
                compare: 'percent'
              }
            },

            tooltip: {
              pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
              valueDecimals: 2
            },

            series: seriesOptions
          });
        }

        seriesOptions[0] = {
          name: 'Compliance',
          data: complianceData
        };

        seriesOptions[1] = {
          name: 'Completion',
          data: completionData
        };

        createChart();
/**
        var rand1, rand2;

        rand1 = Math.round(Math.random() * 100);
        $('#container-checklist').highcharts({
          chart: {
            type: 'pie',
            renderTo: 'container-checklist',
          },
          title: {
            text: '<span style="font-size: 20px;">Compliance</span>'
          },
          subtitle: {
            text: '<span style="font-size: 20px;">' + rand1 + '</span>',
            align: 'center'
          },
          tooltip: {
            enabled: false
          },
          credits: {
            enabled: false
          },
          plotOptions: {
            pie: {
              shadow: false,
              center: ['50%', '50%'],
              dataLabels: {
                enabled: false
              }
            }
          },

          series: [{
            name: 'Compliance',
            data: [{
              y: rand1,
              color: '#55BF3B'
            }, {
              y: 100 - rand1,
              color: '#ffffff'
            }],
            size: '140%',
            innerSize: '60%',
            enableMouseTracking: false,

          }]
        });

        rand2 = Math.round(Math.random() * 100);
        $('#container-completion').highcharts({
          chart: {
            type: 'pie',
            renderTo: 'container-completion',
          },
          title: {
            text: '<span style="font-size: 20px;">Completion</span>'
          },
          credits: {
            enabled: false
          },
          subtitle: {
            text: '<span style="font-size: 20px;">' + rand2 + '</span>',
            align: 'center'
          },
          tooltip: {
            enabled: false
          },
          plotOptions: {
            pie: {
              shadow: false,
              center: ['50%', '50%'],
              dataLabels: {
                enabled: false
              }
            }
          },

          series: [{
            name: 'Completion',
            data: [{
              y: rand2,
              color: '#55BF3B'
            }, {
              y: 100 - rand2,
              color: '#ffffff'
            }],
            size: '140%',
            innerSize: '60%',
            enableMouseTracking: false
          }]
        });
        **/
        $(".dial").knob();
      });
    </script>

<% end %>